<ion-content [fullscreen]="true">
  <div id="mapidd">
  </div>
  <ion-fab #fab horizontal="end" vertical="top" slot="fixed">
    <ion-fab-button color="primary">
      <ion-icon name="caret-down"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="bottom">
      <ion-fab-button (click)="abrirCarritoRuta()" color="warning">
        <ion-icon name="cart-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="onSalir()" color="dark">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>

  <ion-fab vertical="bottom" horizontal="start" slot="fixed" style="width: 95vw;">
    <ion-row>
      <ion-col size="9" >
         
      </ion-col>
      <ion-col size="3">
        <ion-badge style='margin-bottom:-20px !important; margin-left: 18vw;'  *ngIf="mensajesSinLeer>0" color="danger">{{mensajesSinLeer}}</ion-badge>
        <div style="direction: rtl; margin-right: 60px;">
          <ion-badge style='margin-bottom:-40px !important' *ngIf="mensajesSinLeer>0" color="medium">{{mensajeNuevo}}</ion-badge>
        </div>
        <ion-fab-button style="margin-left: 3.7vh;" (click)="abrirChat()" color="success">
          <ion-icon name="chatbox"></ion-icon>
        </ion-fab-button>
      </ion-col>
    </ion-row>
    <ion-card style="border-radius: 15px;">
      <ion-card-content>
        <ion-row>
          <ion-col size="4" class="flexCenterCol">
            <ion-icon style="font-size: 1.2rem; border-radius: 100px;  padding: 6px;" [ngClass]="position>0? 'activo' : 'inactivo'" name="bicycle-sharp"></ion-icon>
            <ion-label style="margin-top: 5px; font-weight: bold; font-size: 1rem;">En Camino</ion-label>
          </ion-col>
          <ion-col size="4" class="flexCenterCol">
            <ion-icon style="font-size: 1.2rem; border-radius: 100px;  padding: 6px;" [ngClass]="position>1? 'activo' : 'inactivo'" name="home-sharp"></ion-icon>
            <ion-label style="margin-top: 5px; font-weight: bold; font-size: 1rem;" *ngIf="position > 1">Ubicación</ion-label>
            <ion-button  (click)="onUbicacion()" style="margin-top: 5px; font-weight: bold; font-size: 0.75rem;" *ngIf="!(position > 1)" size="small">
              Ubicación
            </ion-button>
          </ion-col>
          <ion-col size="4" class="flexCenterCol">
            <ion-icon style="font-size: 1.2rem; border-radius: 100px;  padding: 6px;" [ngClass]="position>2? 'activo' : 'inactivo'" name="checkmark-done-sharp"></ion-icon>
            <ion-label *ngIf="!(estado=='UC')" style="margin-top: 5px; font-weight: bold; font-size: 1rem;">Finalizar</ion-label>
            <ion-button *ngIf="estado=='UC'" (click)="onFinalizar()" style="margin-top: 5px; font-weight: bold; font-size: 0.75rem;" size="small">
              Finalizar
            </ion-button>
          </ion-col>
          <ion-col size="12">
            <div [ngSwitch]="estado">
              <ion-progress-bar *ngSwitchCase="'PU'" value="0.25" buffer="0.33" style="--background: #F0C911; --progress-background: #F0C911;"></ion-progress-bar>
              <ion-progress-bar *ngSwitchCase="'UC'" value="0.25" buffer="0.66" style="--background: #F0C911; --progress-background: #F0C911;"></ion-progress-bar>
              <ion-progress-bar *ngSwitchCase="'F'" value="0.25" buffer="1"  color="danger"></ion-progress-bar>
            </div>
          </ion-col>
        </ion-row>

        <ion-row style="border-top: 1px solid grey; margin-top: 10px;">
          <ion-col size="12" class="flexCenterDer">
              <ion-icon style="color:#000; font-size: 1rem;" name="analytics-sharp"></ion-icon>
              <ion-text style="color:#000; font-weight: 500; font-size: 1rem; margin-left: 5px;">
                Distancia:  {{distancia | number : '1.2-2'}} mts.
              </ion-text>
          </ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>
  </ion-fab>
</ion-content>
